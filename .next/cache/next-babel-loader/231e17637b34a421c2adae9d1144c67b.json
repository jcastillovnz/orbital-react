{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\"; // You can play with this to adjust the sensitivity\n// higher values make mouse less sensitive\n\nvar pixelsPerDegree = 2;\n\nvar App = function App(props) {\n  var dir = props.dir,\n      numImages = props.numImages;\n\n  var _useState = useState(0),\n      imageIndex = _useState[0],\n      changeImageIndex = _useState[1];\n\n  var _useState2 = useState(false),\n      dragging = _useState2[0],\n      changeDragging = _useState2[1];\n\n  var _useState3 = useState(0),\n      dragStartIndex = _useState3[0],\n      changeDragStartIndex = _useState3[1];\n\n  var _useState4 = useState(0),\n      dragStart = _useState4[0],\n      changeDragStart = _useState4[1];\n  /*   const state = {\r\n      dragging: false,\r\n      imageIndex: 0,\r\n      dragStartIndex: 0\r\n    }; */\n\n\n  var handleMouseMove = function handleMouseMove(e) {\n    console.log(\"state on draggin \", dragging);\n    console.log(\"handle mouse move ->>>>, draggin: \", dragging);\n\n    if (dragging === false) {\n      //  alert(\"IS TRUE DRAGGIN IN MOVE\")\n      updateImageIndex(e.screenX); /// alert(\"is dragging\")\n\n      console.log(\"image index\", imageIndex);\n    }\n  };\n\n  var handleMouseDown = function handleMouseDown(e) {\n    e.persist(); // ChangeStatusDraggin()\n\n    changeDragging(true); //true\n\n    changeDragStart(e.screenX);\n    changeDragStartIndex(imageIndex);\n    console.log(\"draggin set in true --->\", dragging); //alert( dragging)\n\n    /*     this.setState(state => ({\r\n          dragging: true,\r\n          dragStart: e.screenX,\r\n          dragStartIndex: state.imageIndex\r\n        })); */\n  };\n\n  var handleMouseUp = function handleMouseUp() {\n    changeDragging(false); // false\n\n    console.log(\"draggin set in false --->\", dragging);\n  };\n\n  var updateImageIndex = function updateImageIndex(currentPosition) {\n    console.log(\"updateImageIndex\", currentPosition);\n    var pixelsPerImage = pixelsPerDegree * (360 / numImages); // pixels moved\n\n    var dx = (currentPosition - dragStart) / pixelsPerImage;\n    var index = Math.floor(dx) % numImages;\n\n    if (index < 0) {\n      index = numImages + index - 1;\n    }\n\n    index = (index + dragStartIndex) % numImages; // console.log(index, dragStartIndex, numImages)\n\n    if (index !== imageIndex) {\n      //this.setState({ imageIndex: index });\n      changeImageIndex(index);\n    }\n  };\n\n  var preventDragHandler = function preventDragHandler(e) {\n    e.preventDefault();\n  };\n\n  useEffect(function () {\n    console.log(\"se monta\");\n    document.addEventListener(\"mousemove\", handleMouseMove, false);\n    document.addEventListener(\"mouseup\", handleMouseUp, false); // returned function will be called on component unmount \n\n    return function () {\n      console.log(\"se desmonta\");\n      document.removeEventListener('mousemove', handleMouseMove, false);\n      document.removeEventListener(\"mouseup\", handleMouseUp, false);\n    };\n  }, []);\n\n  var renderImage = function renderImage() {\n    return __jsx(\"div\", {\n      style: {\n        position: 'absolute',\n        width: 'auto',\n        display: 'block',\n        margin: '0 auto',\n        'text-align': 'left'\n      },\n      className: \"react360\"\n    }, __jsx(\"img\", {\n      style: {\n        margin: 'auto',\n        position: 'relative',\n        height: '95vh',\n        width: 'auto',\n        display: 'flex',\n        'justify-content': 'center',\n        'align-items': 'center',\n        'background-color': 'white',\n        '-webkit-user-select': 'none',\n        '-khtml-user-select': 'none',\n        '-moz-user-select': 'none',\n        '-ms-user-select': 'none',\n        '-o-user-select': 'none',\n        'user-select': 'none',\n        left: '82%',\n        bottom: '150%',\n        top: '-25%',\n        'transform': 'translate(-50%, 0)',\n        '-ms-transform': 'translate(-50%, 0)',\n        '-webkit-transform': 'translate(-50%, 0)',\n        'z-index': 0\n      },\n      className: \"react-360-img\",\n      src: \"\".concat(dir, \"/\").concat(imageIndex, \".jpg\")\n      /*  src={require(`${dir}/${imageIndex}.jpg`)} */\n\n    }));\n  };\n\n  return __jsx(\"div\", {\n    className: \"react-360-img\",\n    onMouseDown: handleMouseDown,\n    onDragStart: preventDragHandler\n  }, __jsx(\"div\", {\n    style: {\n      position: 'fixed'\n    }\n  }, \"Metrics:\", __jsx(\"ul\", null, __jsx(\"li\", null, \"Num images: \", numImages), __jsx(\"li\", null, \"Image index: \", imageIndex), __jsx(\"li\", null, \"Dragging:\", dragging ? 'Is dragging' : 'No draggin'), __jsx(\"li\", null, \"DragStart:\", dragStart), __jsx(\"li\", null, \"DragStartIndex: \", dragStartIndex))), renderImage());\n};\n\nexport default App;","map":null,"metadata":{},"sourceType":"module"}